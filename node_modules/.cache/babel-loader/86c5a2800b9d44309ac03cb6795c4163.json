{"ast":null,"code":"import PromisePolyfill from 'promise-polyfill';\nimport fetchPonyfill from 'fetch-ponyfill';\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    enumerableOnly && (symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    })), keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = null != arguments[i] ? arguments[i] : {};\n    i % 2 ? ownKeys(Object(source), !0).forEach(function (key) {\n      _defineProperty(target, key, source[key]);\n    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) {\n      Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n    });\n  }\n\n  return target;\n}\n\nfunction _regeneratorRuntime() {\n  /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */\n  _regeneratorRuntime = function () {\n    return exports;\n  };\n\n  var exports = {},\n      Op = Object.prototype,\n      hasOwn = Op.hasOwnProperty,\n      $Symbol = \"function\" == typeof Symbol ? Symbol : {},\n      iteratorSymbol = $Symbol.iterator || \"@@iterator\",\n      asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\",\n      toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\";\n\n  function define(obj, key, value) {\n    return Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: !0,\n      configurable: !0,\n      writable: !0\n    }), obj[key];\n  }\n\n  try {\n    define({}, \"\");\n  } catch (err) {\n    define = function (obj, key, value) {\n      return obj[key] = value;\n    };\n  }\n\n  function wrap(innerFn, outerFn, self, tryLocsList) {\n    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator,\n        generator = Object.create(protoGenerator.prototype),\n        context = new Context(tryLocsList || []);\n    return generator._invoke = function (innerFn, self, context) {\n      var state = \"suspendedStart\";\n      return function (method, arg) {\n        if (\"executing\" === state) throw new Error(\"Generator is already running\");\n\n        if (\"completed\" === state) {\n          if (\"throw\" === method) throw arg;\n          return doneResult();\n        }\n\n        for (context.method = method, context.arg = arg;;) {\n          var delegate = context.delegate;\n\n          if (delegate) {\n            var delegateResult = maybeInvokeDelegate(delegate, context);\n\n            if (delegateResult) {\n              if (delegateResult === ContinueSentinel) continue;\n              return delegateResult;\n            }\n          }\n\n          if (\"next\" === context.method) context.sent = context._sent = context.arg;else if (\"throw\" === context.method) {\n            if (\"suspendedStart\" === state) throw state = \"completed\", context.arg;\n            context.dispatchException(context.arg);\n          } else \"return\" === context.method && context.abrupt(\"return\", context.arg);\n          state = \"executing\";\n          var record = tryCatch(innerFn, self, context);\n\n          if (\"normal\" === record.type) {\n            if (state = context.done ? \"completed\" : \"suspendedYield\", record.arg === ContinueSentinel) continue;\n            return {\n              value: record.arg,\n              done: context.done\n            };\n          }\n\n          \"throw\" === record.type && (state = \"completed\", context.method = \"throw\", context.arg = record.arg);\n        }\n      };\n    }(innerFn, self, context), generator;\n  }\n\n  function tryCatch(fn, obj, arg) {\n    try {\n      return {\n        type: \"normal\",\n        arg: fn.call(obj, arg)\n      };\n    } catch (err) {\n      return {\n        type: \"throw\",\n        arg: err\n      };\n    }\n  }\n\n  exports.wrap = wrap;\n  var ContinueSentinel = {};\n\n  function Generator() {}\n\n  function GeneratorFunction() {}\n\n  function GeneratorFunctionPrototype() {}\n\n  var IteratorPrototype = {};\n  define(IteratorPrototype, iteratorSymbol, function () {\n    return this;\n  });\n  var getProto = Object.getPrototypeOf,\n      NativeIteratorPrototype = getProto && getProto(getProto(values([])));\n  NativeIteratorPrototype && NativeIteratorPrototype !== Op && hasOwn.call(NativeIteratorPrototype, iteratorSymbol) && (IteratorPrototype = NativeIteratorPrototype);\n  var Gp = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(IteratorPrototype);\n\n  function defineIteratorMethods(prototype) {\n    [\"next\", \"throw\", \"return\"].forEach(function (method) {\n      define(prototype, method, function (arg) {\n        return this._invoke(method, arg);\n      });\n    });\n  }\n\n  function AsyncIterator(generator, PromiseImpl) {\n    function invoke(method, arg, resolve, reject) {\n      var record = tryCatch(generator[method], generator, arg);\n\n      if (\"throw\" !== record.type) {\n        var result = record.arg,\n            value = result.value;\n        return value && \"object\" == typeof value && hasOwn.call(value, \"__await\") ? PromiseImpl.resolve(value.__await).then(function (value) {\n          invoke(\"next\", value, resolve, reject);\n        }, function (err) {\n          invoke(\"throw\", err, resolve, reject);\n        }) : PromiseImpl.resolve(value).then(function (unwrapped) {\n          result.value = unwrapped, resolve(result);\n        }, function (error) {\n          return invoke(\"throw\", error, resolve, reject);\n        });\n      }\n\n      reject(record.arg);\n    }\n\n    var previousPromise;\n\n    this._invoke = function (method, arg) {\n      function callInvokeWithMethodAndArg() {\n        return new PromiseImpl(function (resolve, reject) {\n          invoke(method, arg, resolve, reject);\n        });\n      }\n\n      return previousPromise = previousPromise ? previousPromise.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg();\n    };\n  }\n\n  function maybeInvokeDelegate(delegate, context) {\n    var method = delegate.iterator[context.method];\n\n    if (undefined === method) {\n      if (context.delegate = null, \"throw\" === context.method) {\n        if (delegate.iterator.return && (context.method = \"return\", context.arg = undefined, maybeInvokeDelegate(delegate, context), \"throw\" === context.method)) return ContinueSentinel;\n        context.method = \"throw\", context.arg = new TypeError(\"The iterator does not provide a 'throw' method\");\n      }\n\n      return ContinueSentinel;\n    }\n\n    var record = tryCatch(method, delegate.iterator, context.arg);\n    if (\"throw\" === record.type) return context.method = \"throw\", context.arg = record.arg, context.delegate = null, ContinueSentinel;\n    var info = record.arg;\n    return info ? info.done ? (context[delegate.resultName] = info.value, context.next = delegate.nextLoc, \"return\" !== context.method && (context.method = \"next\", context.arg = undefined), context.delegate = null, ContinueSentinel) : info : (context.method = \"throw\", context.arg = new TypeError(\"iterator result is not an object\"), context.delegate = null, ContinueSentinel);\n  }\n\n  function pushTryEntry(locs) {\n    var entry = {\n      tryLoc: locs[0]\n    };\n    1 in locs && (entry.catchLoc = locs[1]), 2 in locs && (entry.finallyLoc = locs[2], entry.afterLoc = locs[3]), this.tryEntries.push(entry);\n  }\n\n  function resetTryEntry(entry) {\n    var record = entry.completion || {};\n    record.type = \"normal\", delete record.arg, entry.completion = record;\n  }\n\n  function Context(tryLocsList) {\n    this.tryEntries = [{\n      tryLoc: \"root\"\n    }], tryLocsList.forEach(pushTryEntry, this), this.reset(!0);\n  }\n\n  function values(iterable) {\n    if (iterable) {\n      var iteratorMethod = iterable[iteratorSymbol];\n      if (iteratorMethod) return iteratorMethod.call(iterable);\n      if (\"function\" == typeof iterable.next) return iterable;\n\n      if (!isNaN(iterable.length)) {\n        var i = -1,\n            next = function next() {\n          for (; ++i < iterable.length;) if (hasOwn.call(iterable, i)) return next.value = iterable[i], next.done = !1, next;\n\n          return next.value = undefined, next.done = !0, next;\n        };\n\n        return next.next = next;\n      }\n    }\n\n    return {\n      next: doneResult\n    };\n  }\n\n  function doneResult() {\n    return {\n      value: undefined,\n      done: !0\n    };\n  }\n\n  return GeneratorFunction.prototype = GeneratorFunctionPrototype, define(Gp, \"constructor\", GeneratorFunctionPrototype), define(GeneratorFunctionPrototype, \"constructor\", GeneratorFunction), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, toStringTagSymbol, \"GeneratorFunction\"), exports.isGeneratorFunction = function (genFun) {\n    var ctor = \"function\" == typeof genFun && genFun.constructor;\n    return !!ctor && (ctor === GeneratorFunction || \"GeneratorFunction\" === (ctor.displayName || ctor.name));\n  }, exports.mark = function (genFun) {\n    return Object.setPrototypeOf ? Object.setPrototypeOf(genFun, GeneratorFunctionPrototype) : (genFun.__proto__ = GeneratorFunctionPrototype, define(genFun, toStringTagSymbol, \"GeneratorFunction\")), genFun.prototype = Object.create(Gp), genFun;\n  }, exports.awrap = function (arg) {\n    return {\n      __await: arg\n    };\n  }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, asyncIteratorSymbol, function () {\n    return this;\n  }), exports.AsyncIterator = AsyncIterator, exports.async = function (innerFn, outerFn, self, tryLocsList, PromiseImpl) {\n    void 0 === PromiseImpl && (PromiseImpl = Promise);\n    var iter = new AsyncIterator(wrap(innerFn, outerFn, self, tryLocsList), PromiseImpl);\n    return exports.isGeneratorFunction(outerFn) ? iter : iter.next().then(function (result) {\n      return result.done ? result.value : iter.next();\n    });\n  }, defineIteratorMethods(Gp), define(Gp, toStringTagSymbol, \"Generator\"), define(Gp, iteratorSymbol, function () {\n    return this;\n  }), define(Gp, \"toString\", function () {\n    return \"[object Generator]\";\n  }), exports.keys = function (object) {\n    var keys = [];\n\n    for (var key in object) keys.push(key);\n\n    return keys.reverse(), function next() {\n      for (; keys.length;) {\n        var key = keys.pop();\n        if (key in object) return next.value = key, next.done = !1, next;\n      }\n\n      return next.done = !0, next;\n    };\n  }, exports.values = values, Context.prototype = {\n    constructor: Context,\n    reset: function (skipTempReset) {\n      if (this.prev = 0, this.next = 0, this.sent = this._sent = undefined, this.done = !1, this.delegate = null, this.method = \"next\", this.arg = undefined, this.tryEntries.forEach(resetTryEntry), !skipTempReset) for (var name in this) \"t\" === name.charAt(0) && hasOwn.call(this, name) && !isNaN(+name.slice(1)) && (this[name] = undefined);\n    },\n    stop: function () {\n      this.done = !0;\n      var rootRecord = this.tryEntries[0].completion;\n      if (\"throw\" === rootRecord.type) throw rootRecord.arg;\n      return this.rval;\n    },\n    dispatchException: function (exception) {\n      if (this.done) throw exception;\n      var context = this;\n\n      function handle(loc, caught) {\n        return record.type = \"throw\", record.arg = exception, context.next = loc, caught && (context.method = \"next\", context.arg = undefined), !!caught;\n      }\n\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i],\n            record = entry.completion;\n        if (\"root\" === entry.tryLoc) return handle(\"end\");\n\n        if (entry.tryLoc <= this.prev) {\n          var hasCatch = hasOwn.call(entry, \"catchLoc\"),\n              hasFinally = hasOwn.call(entry, \"finallyLoc\");\n\n          if (hasCatch && hasFinally) {\n            if (this.prev < entry.catchLoc) return handle(entry.catchLoc, !0);\n            if (this.prev < entry.finallyLoc) return handle(entry.finallyLoc);\n          } else if (hasCatch) {\n            if (this.prev < entry.catchLoc) return handle(entry.catchLoc, !0);\n          } else {\n            if (!hasFinally) throw new Error(\"try statement without catch or finally\");\n            if (this.prev < entry.finallyLoc) return handle(entry.finallyLoc);\n          }\n        }\n      }\n    },\n    abrupt: function (type, arg) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n\n        if (entry.tryLoc <= this.prev && hasOwn.call(entry, \"finallyLoc\") && this.prev < entry.finallyLoc) {\n          var finallyEntry = entry;\n          break;\n        }\n      }\n\n      finallyEntry && (\"break\" === type || \"continue\" === type) && finallyEntry.tryLoc <= arg && arg <= finallyEntry.finallyLoc && (finallyEntry = null);\n      var record = finallyEntry ? finallyEntry.completion : {};\n      return record.type = type, record.arg = arg, finallyEntry ? (this.method = \"next\", this.next = finallyEntry.finallyLoc, ContinueSentinel) : this.complete(record);\n    },\n    complete: function (record, afterLoc) {\n      if (\"throw\" === record.type) throw record.arg;\n      return \"break\" === record.type || \"continue\" === record.type ? this.next = record.arg : \"return\" === record.type ? (this.rval = this.arg = record.arg, this.method = \"return\", this.next = \"end\") : \"normal\" === record.type && afterLoc && (this.next = afterLoc), ContinueSentinel;\n    },\n    finish: function (finallyLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.finallyLoc === finallyLoc) return this.complete(entry.completion, entry.afterLoc), resetTryEntry(entry), ContinueSentinel;\n      }\n    },\n    catch: function (tryLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n\n        if (entry.tryLoc === tryLoc) {\n          var record = entry.completion;\n\n          if (\"throw\" === record.type) {\n            var thrown = record.arg;\n            resetTryEntry(entry);\n          }\n\n          return thrown;\n        }\n      }\n\n      throw new Error(\"illegal catch attempt\");\n    },\n    delegateYield: function (iterable, resultName, nextLoc) {\n      return this.delegate = {\n        iterator: values(iterable),\n        resultName: resultName,\n        nextLoc: nextLoc\n      }, \"next\" === this.method && (this.arg = undefined), ContinueSentinel;\n    }\n  }, exports;\n}\n\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\n\nfunction _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n        args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n\n      _next(undefined);\n    });\n  };\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  Object.defineProperty(Constructor, \"prototype\", {\n    writable: false\n  });\n  return Constructor;\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nvar b64 = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';\nvar b64re = /^(?:[A-Za-z\\d+\\/]{4})*?(?:[A-Za-z\\d+\\/]{2}(?:==)?|[A-Za-z\\d+\\/]{3}=?)?$/;\n\nfunction btoa(string) {\n  string = String(string);\n  var bitmap,\n      a,\n      b,\n      c,\n      result = '',\n      i = 0,\n      rest = string.length % 3; // To determine the final padding\n\n  for (; i < string.length;) {\n    if ((a = string.charCodeAt(i++)) > 255 || (b = string.charCodeAt(i++)) > 255 || (c = string.charCodeAt(i++)) > 255) throw new TypeError(\"Failed to execute 'btoa' on 'Window': The string to be encoded contains characters outside of the Latin1 range.\");\n    bitmap = a << 16 | b << 8 | c;\n    result += b64.charAt(bitmap >> 18 & 63) + b64.charAt(bitmap >> 12 & 63) + b64.charAt(bitmap >> 6 & 63) + b64.charAt(bitmap & 63);\n  } // If there's need of padding, replace the last 'A's with equal signs\n\n\n  return rest ? result.slice(0, rest - 3) + '==='.substring(rest) : result;\n}\n\nfunction atob(string) {\n  // atob can work with strings with whitespaces, even inside the encoded part,\n  // but only \\t, \\n, \\f, \\r and ' ', which can be stripped.\n  string = String(string).replace(/[\\t\\n\\f\\r ]+/g, '');\n  if (!b64re.test(string)) throw new TypeError(\"Failed to execute 'atob' on 'Window': The string to be decoded is not correctly encoded.\"); // Adding the padding if missing, for semplicity\n\n  string += '=='.slice(2 - (string.length & 3));\n  var bitmap,\n      result = '',\n      r1,\n      r2,\n      i = 0;\n\n  for (; i < string.length;) {\n    bitmap = b64.indexOf(string.charAt(i++)) << 18 | b64.indexOf(string.charAt(i++)) << 12 | (r1 = b64.indexOf(string.charAt(i++))) << 6 | (r2 = b64.indexOf(string.charAt(i++)));\n    result += r1 === 64 ? String.fromCharCode(bitmap >> 16 & 255) : r2 === 64 ? String.fromCharCode(bitmap >> 16 & 255, bitmap >> 8 & 255) : String.fromCharCode(bitmap >> 16 & 255, bitmap >> 8 & 255, bitmap & 255);\n  }\n\n  return result;\n}\n\nvar version = \"2.7.1\";\n/**\n * Base-64 encodes a (JSON-castable) object.\n *\n * @param obj - The object to encode.\n */\n\nvar encode64 = function encode64(obj) {\n  return btoa(JSON.stringify(obj));\n};\n/**\n * Generates a client header.\n *\n * @param givenLabel\n */\n\n\nvar clientHeader = function clientHeader(givenLabel) {\n  var label = \"@formspree/core@\".concat(version);\n  if (!givenLabel) return label;\n  return \"\".concat(givenLabel, \" \").concat(label);\n};\n/**\n * The current timestamp.\n */\n\n\nvar now = function now() {\n  // @ts-ignore\n  return 1 * new Date();\n};\n\nvar appendExtraData = function appendExtraData(formData, prop, value) {\n  if (formData instanceof FormData) {\n    formData.append(prop, value);\n  } else {\n    formData = Object.assign(formData, _defineProperty({}, prop, value));\n  }\n};\n\nvar handleSCA = /*#__PURE__*/function () {\n  var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(_ref) {\n    var stripePromise, response, responseData, payload, data, fetchImpl, request, url, stripeResult, resSubmitResponse, resSubmitData;\n    return _regeneratorRuntime().wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            stripePromise = _ref.stripePromise, response = _ref.response, responseData = _ref.responseData, payload = _ref.payload, data = _ref.data, fetchImpl = _ref.fetchImpl, request = _ref.request, url = _ref.url;\n            _context.next = 3;\n            return stripePromise.handleCardAction(responseData.stripe.paymentIntentClientSecret);\n\n          case 3:\n            stripeResult = _context.sent;\n\n            if (!stripeResult.error) {\n              _context.next = 8;\n              break;\n            }\n\n            return _context.abrupt(\"return\", {\n              response: response,\n              body: {\n                errors: [{\n                  code: 'STRIPE_CLIENT_ERROR',\n                  message: 'Stripe SCA error',\n                  field: 'paymentMethod'\n                }]\n              }\n            });\n\n          case 8:\n            if (!payload.paymentMethod.id) {\n              appendExtraData(data, 'paymentMethod', payload.paymentMethod.id);\n            }\n\n            appendExtraData(data, 'paymentIntent', stripeResult.paymentIntent.id);\n            appendExtraData(data, 'resubmitKey', responseData.resubmitKey); // Resubmit the form with the paymentIntent and resubmitKey\n\n            _context.next = 13;\n            return fetchImpl(url, _objectSpread2(_objectSpread2({}, request), {}, {\n              body: JSON.stringify({\n                paymentIntent: stripeResult.paymentIntent.id,\n                resubmitKey: responseData.resubmitKey\n              })\n            }));\n\n          case 13:\n            resSubmitResponse = _context.sent;\n            _context.next = 16;\n            return resSubmitResponse.json();\n\n          case 16:\n            resSubmitData = _context.sent;\n            return _context.abrupt(\"return\", {\n              response: resSubmitResponse,\n              body: resSubmitData\n            });\n\n          case 18:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n\n  return function handleSCA(_x) {\n    return _ref2.apply(this, arguments);\n  };\n}();\n\nvar webdriver = function webdriver() {\n  return navigator.webdriver || !!document.documentElement.getAttribute(atob('d2ViZHJpdmVy')) || // @ts-ignore\n  !!window.callPhantom || // @ts-ignore\n  !!window._phantom;\n};\n\nvar Session = /*#__PURE__*/function () {\n  function Session() {\n    _classCallCheck(this, Session);\n\n    this.loadedAt = now();\n    this.webdriver = webdriver();\n  }\n\n  _createClass(Session, [{\n    key: \"teardown\",\n    value: function teardown() {}\n  }, {\n    key: \"data\",\n    value: function data() {\n      return {\n        loadedAt: this.loadedAt,\n        webdriver: this.webdriver\n      };\n    }\n  }]);\n\n  return Session;\n}();\n\nvar Client = /*#__PURE__*/function () {\n  function Client() {\n    var config = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    _classCallCheck(this, Client);\n\n    this.project = config.project;\n    this.stripePromise = config.stripePromise;\n    if (typeof window !== 'undefined') this.startBrowserSession();\n  }\n  /**\n   * Starts a browser session.\n   */\n\n\n  _createClass(Client, [{\n    key: \"startBrowserSession\",\n    value: function startBrowserSession() {\n      if (!this.session) {\n        this.session = new Session();\n      }\n    }\n    /**\n     * Teardown the client session.\n     */\n\n  }, {\n    key: \"teardown\",\n    value: function teardown() {\n      if (this.session) this.session.teardown();\n    }\n    /**\n     * Submit a form.\n     *\n     * @param formKey - The form key.\n     * @param data - An object or FormData instance containing submission data.\n     * @param args - An object of form submission data.\n     */\n\n  }, {\n    key: \"submitForm\",\n    value: function () {\n      var _submitForm = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(formKey, data) {\n        var opts,\n            endpoint,\n            fetchImpl,\n            url,\n            serializeBody,\n            headers,\n            request,\n            payload,\n            response,\n            responseData,\n            _args = arguments;\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                opts = _args.length > 2 && _args[2] !== undefined ? _args[2] : {};\n                endpoint = opts.endpoint || 'https://formspree.io';\n                fetchImpl = opts.fetchImpl || fetchPonyfill({\n                  Promise: PromisePolyfill\n                }).fetch;\n                url = this.project ? \"\".concat(endpoint, \"/p/\").concat(this.project, \"/f/\").concat(formKey) : \"\".concat(endpoint, \"/f/\").concat(formKey);\n\n                serializeBody = function serializeBody(data) {\n                  if (data instanceof FormData) return data;\n                  return JSON.stringify(data);\n                };\n\n                headers = {\n                  Accept: 'application/json',\n                  'Formspree-Client': clientHeader(opts.clientName)\n                };\n\n                if (this.session) {\n                  headers['Formspree-Session-Data'] = encode64(this.session.data());\n                }\n\n                if (!(data instanceof FormData)) {\n                  headers['Content-Type'] = 'application/json';\n                }\n\n                request = {\n                  method: 'POST',\n                  mode: 'cors',\n                  body: serializeBody(data),\n                  headers: headers\n                }; // first check if we need to add the stripe paymentMethod\n\n                if (!(this.stripePromise && opts.createPaymentMethod)) {\n                  _context.next = 29;\n                  break;\n                }\n\n                _context.next = 12;\n                return opts.createPaymentMethod();\n\n              case 12:\n                payload = _context.sent;\n\n                if (!payload.error) {\n                  _context.next = 15;\n                  break;\n                }\n\n                return _context.abrupt(\"return\", {\n                  response: null,\n                  body: {\n                    errors: [{\n                      code: 'STRIPE_CLIENT_ERROR',\n                      message: 'Error creating payment method',\n                      field: 'paymentMethod'\n                    }]\n                  }\n                });\n\n              case 15:\n                // Add the paymentMethod to the data\n                appendExtraData(data, 'paymentMethod', payload.paymentMethod.id); // Send a request to Formspree server to handle the payment method\n\n                _context.next = 18;\n                return fetchImpl(url, _objectSpread2(_objectSpread2({}, request), {}, {\n                  body: data\n                }));\n\n              case 18:\n                response = _context.sent;\n                _context.next = 21;\n                return response.json();\n\n              case 21:\n                responseData = _context.sent;\n\n                if (!(responseData && responseData.stripe && responseData.stripe.requiresAction && responseData.resubmitKey)) {\n                  _context.next = 26;\n                  break;\n                }\n\n                _context.next = 25;\n                return handleSCA({\n                  stripePromise: this.stripePromise,\n                  responseData: responseData,\n                  response: response,\n                  payload: payload,\n                  data: data,\n                  fetchImpl: fetchImpl,\n                  request: request,\n                  url: url\n                });\n\n              case 25:\n                return _context.abrupt(\"return\", _context.sent);\n\n              case 26:\n                return _context.abrupt(\"return\", {\n                  response: response,\n                  body: responseData\n                });\n\n              case 29:\n                return _context.abrupt(\"return\", fetchImpl(url, request).then(function (response) {\n                  return response.json().then(function (body) {\n                    return {\n                      body: body,\n                      response: response\n                    };\n                  });\n                }));\n\n              case 30:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function submitForm(_x, _x2) {\n        return _submitForm.apply(this, arguments);\n      }\n\n      return submitForm;\n    }()\n  }]);\n\n  return Client;\n}();\n/**\n * Constructs the client object.\n */\n\n\nvar createClient = function createClient(config) {\n  return new Client(config);\n};\n/**\n * Fetches the global default client.\n */\n\n\nvar getDefaultClient = function getDefaultClient() {\n  if (!defaultClientSingleton) {\n    defaultClientSingleton = createClient();\n  }\n\n  return defaultClientSingleton;\n};\n/**\n * The global default client. Note, this client may not get torn down.\n */\n\n\nvar defaultClientSingleton;\nexport { Client, createClient, getDefaultClient };","map":{"version":3,"names":["PromisePolyfill","fetchPonyfill","ownKeys","object","enumerableOnly","keys","Object","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread2","target","i","arguments","length","source","forEach","key","_defineProperty","getOwnPropertyDescriptors","defineProperties","defineProperty","_regeneratorRuntime","exports","Op","prototype","hasOwn","hasOwnProperty","$Symbol","Symbol","iteratorSymbol","iterator","asyncIteratorSymbol","asyncIterator","toStringTagSymbol","toStringTag","define","obj","value","configurable","writable","err","wrap","innerFn","outerFn","self","tryLocsList","protoGenerator","Generator","generator","create","context","Context","_invoke","state","method","arg","Error","doneResult","delegate","delegateResult","maybeInvokeDelegate","ContinueSentinel","sent","_sent","dispatchException","abrupt","record","tryCatch","type","done","fn","call","GeneratorFunction","GeneratorFunctionPrototype","IteratorPrototype","getProto","getPrototypeOf","NativeIteratorPrototype","values","Gp","defineIteratorMethods","AsyncIterator","PromiseImpl","invoke","resolve","reject","result","__await","then","unwrapped","error","previousPromise","callInvokeWithMethodAndArg","undefined","return","TypeError","info","resultName","next","nextLoc","pushTryEntry","locs","entry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","resetTryEntry","completion","reset","iterable","iteratorMethod","isNaN","displayName","isGeneratorFunction","genFun","ctor","constructor","name","mark","setPrototypeOf","__proto__","awrap","async","Promise","iter","reverse","pop","skipTempReset","prev","charAt","slice","stop","rootRecord","rval","exception","handle","loc","caught","hasCatch","hasFinally","finallyEntry","complete","finish","catch","thrown","delegateYield","asyncGeneratorStep","gen","_next","_throw","_asyncToGenerator","args","_classCallCheck","instance","Constructor","_defineProperties","props","descriptor","_createClass","protoProps","staticProps","b64","b64re","btoa","string","String","bitmap","a","b","c","rest","charCodeAt","substring","atob","replace","test","r1","r2","indexOf","fromCharCode","version","encode64","JSON","stringify","clientHeader","givenLabel","label","concat","now","Date","appendExtraData","formData","prop","FormData","append","assign","handleSCA","_ref2","_callee","_ref","stripePromise","response","responseData","payload","data","fetchImpl","request","url","stripeResult","resSubmitResponse","resSubmitData","_callee$","_context","handleCardAction","stripe","paymentIntentClientSecret","body","errors","code","message","field","paymentMethod","id","paymentIntent","resubmitKey","json","_x","webdriver","navigator","document","documentElement","getAttribute","window","callPhantom","_phantom","Session","loadedAt","teardown","Client","config","project","startBrowserSession","session","_submitForm","formKey","opts","endpoint","serializeBody","headers","_args","fetch","Accept","clientName","mode","createPaymentMethod","requiresAction","submitForm","_x2","createClient","getDefaultClient","defaultClientSingleton"],"sources":["C:/Users/herna/Documents/ItGlobers/prueba/node_modules/@formspree/core/dist/formspree.esm.js"],"sourcesContent":["import PromisePolyfill from 'promise-polyfill';\nimport fetchPonyfill from 'fetch-ponyfill';\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    enumerableOnly && (symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    })), keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = null != arguments[i] ? arguments[i] : {};\n    i % 2 ? ownKeys(Object(source), !0).forEach(function (key) {\n      _defineProperty(target, key, source[key]);\n    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) {\n      Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n    });\n  }\n\n  return target;\n}\n\nfunction _regeneratorRuntime() {\n  /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */\n\n  _regeneratorRuntime = function () {\n    return exports;\n  };\n\n  var exports = {},\n      Op = Object.prototype,\n      hasOwn = Op.hasOwnProperty,\n      $Symbol = \"function\" == typeof Symbol ? Symbol : {},\n      iteratorSymbol = $Symbol.iterator || \"@@iterator\",\n      asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\",\n      toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\";\n\n  function define(obj, key, value) {\n    return Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: !0,\n      configurable: !0,\n      writable: !0\n    }), obj[key];\n  }\n\n  try {\n    define({}, \"\");\n  } catch (err) {\n    define = function (obj, key, value) {\n      return obj[key] = value;\n    };\n  }\n\n  function wrap(innerFn, outerFn, self, tryLocsList) {\n    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator,\n        generator = Object.create(protoGenerator.prototype),\n        context = new Context(tryLocsList || []);\n    return generator._invoke = function (innerFn, self, context) {\n      var state = \"suspendedStart\";\n      return function (method, arg) {\n        if (\"executing\" === state) throw new Error(\"Generator is already running\");\n\n        if (\"completed\" === state) {\n          if (\"throw\" === method) throw arg;\n          return doneResult();\n        }\n\n        for (context.method = method, context.arg = arg;;) {\n          var delegate = context.delegate;\n\n          if (delegate) {\n            var delegateResult = maybeInvokeDelegate(delegate, context);\n\n            if (delegateResult) {\n              if (delegateResult === ContinueSentinel) continue;\n              return delegateResult;\n            }\n          }\n\n          if (\"next\" === context.method) context.sent = context._sent = context.arg;else if (\"throw\" === context.method) {\n            if (\"suspendedStart\" === state) throw state = \"completed\", context.arg;\n            context.dispatchException(context.arg);\n          } else \"return\" === context.method && context.abrupt(\"return\", context.arg);\n          state = \"executing\";\n          var record = tryCatch(innerFn, self, context);\n\n          if (\"normal\" === record.type) {\n            if (state = context.done ? \"completed\" : \"suspendedYield\", record.arg === ContinueSentinel) continue;\n            return {\n              value: record.arg,\n              done: context.done\n            };\n          }\n\n          \"throw\" === record.type && (state = \"completed\", context.method = \"throw\", context.arg = record.arg);\n        }\n      };\n    }(innerFn, self, context), generator;\n  }\n\n  function tryCatch(fn, obj, arg) {\n    try {\n      return {\n        type: \"normal\",\n        arg: fn.call(obj, arg)\n      };\n    } catch (err) {\n      return {\n        type: \"throw\",\n        arg: err\n      };\n    }\n  }\n\n  exports.wrap = wrap;\n  var ContinueSentinel = {};\n\n  function Generator() {}\n\n  function GeneratorFunction() {}\n\n  function GeneratorFunctionPrototype() {}\n\n  var IteratorPrototype = {};\n  define(IteratorPrototype, iteratorSymbol, function () {\n    return this;\n  });\n  var getProto = Object.getPrototypeOf,\n      NativeIteratorPrototype = getProto && getProto(getProto(values([])));\n  NativeIteratorPrototype && NativeIteratorPrototype !== Op && hasOwn.call(NativeIteratorPrototype, iteratorSymbol) && (IteratorPrototype = NativeIteratorPrototype);\n  var Gp = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(IteratorPrototype);\n\n  function defineIteratorMethods(prototype) {\n    [\"next\", \"throw\", \"return\"].forEach(function (method) {\n      define(prototype, method, function (arg) {\n        return this._invoke(method, arg);\n      });\n    });\n  }\n\n  function AsyncIterator(generator, PromiseImpl) {\n    function invoke(method, arg, resolve, reject) {\n      var record = tryCatch(generator[method], generator, arg);\n\n      if (\"throw\" !== record.type) {\n        var result = record.arg,\n            value = result.value;\n        return value && \"object\" == typeof value && hasOwn.call(value, \"__await\") ? PromiseImpl.resolve(value.__await).then(function (value) {\n          invoke(\"next\", value, resolve, reject);\n        }, function (err) {\n          invoke(\"throw\", err, resolve, reject);\n        }) : PromiseImpl.resolve(value).then(function (unwrapped) {\n          result.value = unwrapped, resolve(result);\n        }, function (error) {\n          return invoke(\"throw\", error, resolve, reject);\n        });\n      }\n\n      reject(record.arg);\n    }\n\n    var previousPromise;\n\n    this._invoke = function (method, arg) {\n      function callInvokeWithMethodAndArg() {\n        return new PromiseImpl(function (resolve, reject) {\n          invoke(method, arg, resolve, reject);\n        });\n      }\n\n      return previousPromise = previousPromise ? previousPromise.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg();\n    };\n  }\n\n  function maybeInvokeDelegate(delegate, context) {\n    var method = delegate.iterator[context.method];\n\n    if (undefined === method) {\n      if (context.delegate = null, \"throw\" === context.method) {\n        if (delegate.iterator.return && (context.method = \"return\", context.arg = undefined, maybeInvokeDelegate(delegate, context), \"throw\" === context.method)) return ContinueSentinel;\n        context.method = \"throw\", context.arg = new TypeError(\"The iterator does not provide a 'throw' method\");\n      }\n\n      return ContinueSentinel;\n    }\n\n    var record = tryCatch(method, delegate.iterator, context.arg);\n    if (\"throw\" === record.type) return context.method = \"throw\", context.arg = record.arg, context.delegate = null, ContinueSentinel;\n    var info = record.arg;\n    return info ? info.done ? (context[delegate.resultName] = info.value, context.next = delegate.nextLoc, \"return\" !== context.method && (context.method = \"next\", context.arg = undefined), context.delegate = null, ContinueSentinel) : info : (context.method = \"throw\", context.arg = new TypeError(\"iterator result is not an object\"), context.delegate = null, ContinueSentinel);\n  }\n\n  function pushTryEntry(locs) {\n    var entry = {\n      tryLoc: locs[0]\n    };\n    1 in locs && (entry.catchLoc = locs[1]), 2 in locs && (entry.finallyLoc = locs[2], entry.afterLoc = locs[3]), this.tryEntries.push(entry);\n  }\n\n  function resetTryEntry(entry) {\n    var record = entry.completion || {};\n    record.type = \"normal\", delete record.arg, entry.completion = record;\n  }\n\n  function Context(tryLocsList) {\n    this.tryEntries = [{\n      tryLoc: \"root\"\n    }], tryLocsList.forEach(pushTryEntry, this), this.reset(!0);\n  }\n\n  function values(iterable) {\n    if (iterable) {\n      var iteratorMethod = iterable[iteratorSymbol];\n      if (iteratorMethod) return iteratorMethod.call(iterable);\n      if (\"function\" == typeof iterable.next) return iterable;\n\n      if (!isNaN(iterable.length)) {\n        var i = -1,\n            next = function next() {\n          for (; ++i < iterable.length;) if (hasOwn.call(iterable, i)) return next.value = iterable[i], next.done = !1, next;\n\n          return next.value = undefined, next.done = !0, next;\n        };\n\n        return next.next = next;\n      }\n    }\n\n    return {\n      next: doneResult\n    };\n  }\n\n  function doneResult() {\n    return {\n      value: undefined,\n      done: !0\n    };\n  }\n\n  return GeneratorFunction.prototype = GeneratorFunctionPrototype, define(Gp, \"constructor\", GeneratorFunctionPrototype), define(GeneratorFunctionPrototype, \"constructor\", GeneratorFunction), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, toStringTagSymbol, \"GeneratorFunction\"), exports.isGeneratorFunction = function (genFun) {\n    var ctor = \"function\" == typeof genFun && genFun.constructor;\n    return !!ctor && (ctor === GeneratorFunction || \"GeneratorFunction\" === (ctor.displayName || ctor.name));\n  }, exports.mark = function (genFun) {\n    return Object.setPrototypeOf ? Object.setPrototypeOf(genFun, GeneratorFunctionPrototype) : (genFun.__proto__ = GeneratorFunctionPrototype, define(genFun, toStringTagSymbol, \"GeneratorFunction\")), genFun.prototype = Object.create(Gp), genFun;\n  }, exports.awrap = function (arg) {\n    return {\n      __await: arg\n    };\n  }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, asyncIteratorSymbol, function () {\n    return this;\n  }), exports.AsyncIterator = AsyncIterator, exports.async = function (innerFn, outerFn, self, tryLocsList, PromiseImpl) {\n    void 0 === PromiseImpl && (PromiseImpl = Promise);\n    var iter = new AsyncIterator(wrap(innerFn, outerFn, self, tryLocsList), PromiseImpl);\n    return exports.isGeneratorFunction(outerFn) ? iter : iter.next().then(function (result) {\n      return result.done ? result.value : iter.next();\n    });\n  }, defineIteratorMethods(Gp), define(Gp, toStringTagSymbol, \"Generator\"), define(Gp, iteratorSymbol, function () {\n    return this;\n  }), define(Gp, \"toString\", function () {\n    return \"[object Generator]\";\n  }), exports.keys = function (object) {\n    var keys = [];\n\n    for (var key in object) keys.push(key);\n\n    return keys.reverse(), function next() {\n      for (; keys.length;) {\n        var key = keys.pop();\n        if (key in object) return next.value = key, next.done = !1, next;\n      }\n\n      return next.done = !0, next;\n    };\n  }, exports.values = values, Context.prototype = {\n    constructor: Context,\n    reset: function (skipTempReset) {\n      if (this.prev = 0, this.next = 0, this.sent = this._sent = undefined, this.done = !1, this.delegate = null, this.method = \"next\", this.arg = undefined, this.tryEntries.forEach(resetTryEntry), !skipTempReset) for (var name in this) \"t\" === name.charAt(0) && hasOwn.call(this, name) && !isNaN(+name.slice(1)) && (this[name] = undefined);\n    },\n    stop: function () {\n      this.done = !0;\n      var rootRecord = this.tryEntries[0].completion;\n      if (\"throw\" === rootRecord.type) throw rootRecord.arg;\n      return this.rval;\n    },\n    dispatchException: function (exception) {\n      if (this.done) throw exception;\n      var context = this;\n\n      function handle(loc, caught) {\n        return record.type = \"throw\", record.arg = exception, context.next = loc, caught && (context.method = \"next\", context.arg = undefined), !!caught;\n      }\n\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i],\n            record = entry.completion;\n        if (\"root\" === entry.tryLoc) return handle(\"end\");\n\n        if (entry.tryLoc <= this.prev) {\n          var hasCatch = hasOwn.call(entry, \"catchLoc\"),\n              hasFinally = hasOwn.call(entry, \"finallyLoc\");\n\n          if (hasCatch && hasFinally) {\n            if (this.prev < entry.catchLoc) return handle(entry.catchLoc, !0);\n            if (this.prev < entry.finallyLoc) return handle(entry.finallyLoc);\n          } else if (hasCatch) {\n            if (this.prev < entry.catchLoc) return handle(entry.catchLoc, !0);\n          } else {\n            if (!hasFinally) throw new Error(\"try statement without catch or finally\");\n            if (this.prev < entry.finallyLoc) return handle(entry.finallyLoc);\n          }\n        }\n      }\n    },\n    abrupt: function (type, arg) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n\n        if (entry.tryLoc <= this.prev && hasOwn.call(entry, \"finallyLoc\") && this.prev < entry.finallyLoc) {\n          var finallyEntry = entry;\n          break;\n        }\n      }\n\n      finallyEntry && (\"break\" === type || \"continue\" === type) && finallyEntry.tryLoc <= arg && arg <= finallyEntry.finallyLoc && (finallyEntry = null);\n      var record = finallyEntry ? finallyEntry.completion : {};\n      return record.type = type, record.arg = arg, finallyEntry ? (this.method = \"next\", this.next = finallyEntry.finallyLoc, ContinueSentinel) : this.complete(record);\n    },\n    complete: function (record, afterLoc) {\n      if (\"throw\" === record.type) throw record.arg;\n      return \"break\" === record.type || \"continue\" === record.type ? this.next = record.arg : \"return\" === record.type ? (this.rval = this.arg = record.arg, this.method = \"return\", this.next = \"end\") : \"normal\" === record.type && afterLoc && (this.next = afterLoc), ContinueSentinel;\n    },\n    finish: function (finallyLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.finallyLoc === finallyLoc) return this.complete(entry.completion, entry.afterLoc), resetTryEntry(entry), ContinueSentinel;\n      }\n    },\n    catch: function (tryLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n\n        if (entry.tryLoc === tryLoc) {\n          var record = entry.completion;\n\n          if (\"throw\" === record.type) {\n            var thrown = record.arg;\n            resetTryEntry(entry);\n          }\n\n          return thrown;\n        }\n      }\n\n      throw new Error(\"illegal catch attempt\");\n    },\n    delegateYield: function (iterable, resultName, nextLoc) {\n      return this.delegate = {\n        iterator: values(iterable),\n        resultName: resultName,\n        nextLoc: nextLoc\n      }, \"next\" === this.method && (this.arg = undefined), ContinueSentinel;\n    }\n  }, exports;\n}\n\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\n\nfunction _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n        args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n\n      _next(undefined);\n    });\n  };\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  Object.defineProperty(Constructor, \"prototype\", {\n    writable: false\n  });\n  return Constructor;\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nvar b64 = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';\nvar b64re = /^(?:[A-Za-z\\d+\\/]{4})*?(?:[A-Za-z\\d+\\/]{2}(?:==)?|[A-Za-z\\d+\\/]{3}=?)?$/;\nfunction btoa(string) {\n  string = String(string);\n  var bitmap,\n      a,\n      b,\n      c,\n      result = '',\n      i = 0,\n      rest = string.length % 3; // To determine the final padding\n\n  for (; i < string.length;) {\n    if ((a = string.charCodeAt(i++)) > 255 || (b = string.charCodeAt(i++)) > 255 || (c = string.charCodeAt(i++)) > 255) throw new TypeError(\"Failed to execute 'btoa' on 'Window': The string to be encoded contains characters outside of the Latin1 range.\");\n    bitmap = a << 16 | b << 8 | c;\n    result += b64.charAt(bitmap >> 18 & 63) + b64.charAt(bitmap >> 12 & 63) + b64.charAt(bitmap >> 6 & 63) + b64.charAt(bitmap & 63);\n  } // If there's need of padding, replace the last 'A's with equal signs\n\n\n  return rest ? result.slice(0, rest - 3) + '==='.substring(rest) : result;\n}\nfunction atob(string) {\n  // atob can work with strings with whitespaces, even inside the encoded part,\n  // but only \\t, \\n, \\f, \\r and ' ', which can be stripped.\n  string = String(string).replace(/[\\t\\n\\f\\r ]+/g, '');\n  if (!b64re.test(string)) throw new TypeError(\"Failed to execute 'atob' on 'Window': The string to be decoded is not correctly encoded.\"); // Adding the padding if missing, for semplicity\n\n  string += '=='.slice(2 - (string.length & 3));\n  var bitmap,\n      result = '',\n      r1,\n      r2,\n      i = 0;\n\n  for (; i < string.length;) {\n    bitmap = b64.indexOf(string.charAt(i++)) << 18 | b64.indexOf(string.charAt(i++)) << 12 | (r1 = b64.indexOf(string.charAt(i++))) << 6 | (r2 = b64.indexOf(string.charAt(i++)));\n    result += r1 === 64 ? String.fromCharCode(bitmap >> 16 & 255) : r2 === 64 ? String.fromCharCode(bitmap >> 16 & 255, bitmap >> 8 & 255) : String.fromCharCode(bitmap >> 16 & 255, bitmap >> 8 & 255, bitmap & 255);\n  }\n\n  return result;\n}\n\nvar version = \"2.7.1\";\n\n/**\n * Base-64 encodes a (JSON-castable) object.\n *\n * @param obj - The object to encode.\n */\nvar encode64 = function encode64(obj) {\n  return btoa(JSON.stringify(obj));\n};\n/**\n * Generates a client header.\n *\n * @param givenLabel\n */\n\nvar clientHeader = function clientHeader(givenLabel) {\n  var label = \"@formspree/core@\".concat(version);\n  if (!givenLabel) return label;\n  return \"\".concat(givenLabel, \" \").concat(label);\n};\n/**\n * The current timestamp.\n */\n\nvar now = function now() {\n  // @ts-ignore\n  return 1 * new Date();\n};\nvar appendExtraData = function appendExtraData(formData, prop, value) {\n  if (formData instanceof FormData) {\n    formData.append(prop, value);\n  } else {\n    formData = Object.assign(formData, _defineProperty({}, prop, value));\n  }\n};\nvar handleSCA = /*#__PURE__*/function () {\n  var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(_ref) {\n    var stripePromise, response, responseData, payload, data, fetchImpl, request, url, stripeResult, resSubmitResponse, resSubmitData;\n    return _regeneratorRuntime().wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            stripePromise = _ref.stripePromise, response = _ref.response, responseData = _ref.responseData, payload = _ref.payload, data = _ref.data, fetchImpl = _ref.fetchImpl, request = _ref.request, url = _ref.url;\n            _context.next = 3;\n            return stripePromise.handleCardAction(responseData.stripe.paymentIntentClientSecret);\n\n          case 3:\n            stripeResult = _context.sent;\n\n            if (!stripeResult.error) {\n              _context.next = 8;\n              break;\n            }\n\n            return _context.abrupt(\"return\", {\n              response: response,\n              body: {\n                errors: [{\n                  code: 'STRIPE_CLIENT_ERROR',\n                  message: 'Stripe SCA error',\n                  field: 'paymentMethod'\n                }]\n              }\n            });\n\n          case 8:\n            if (!payload.paymentMethod.id) {\n              appendExtraData(data, 'paymentMethod', payload.paymentMethod.id);\n            }\n\n            appendExtraData(data, 'paymentIntent', stripeResult.paymentIntent.id);\n            appendExtraData(data, 'resubmitKey', responseData.resubmitKey); // Resubmit the form with the paymentIntent and resubmitKey\n\n            _context.next = 13;\n            return fetchImpl(url, _objectSpread2(_objectSpread2({}, request), {}, {\n              body: JSON.stringify({\n                paymentIntent: stripeResult.paymentIntent.id,\n                resubmitKey: responseData.resubmitKey\n              })\n            }));\n\n          case 13:\n            resSubmitResponse = _context.sent;\n            _context.next = 16;\n            return resSubmitResponse.json();\n\n          case 16:\n            resSubmitData = _context.sent;\n            return _context.abrupt(\"return\", {\n              response: resSubmitResponse,\n              body: resSubmitData\n            });\n\n          case 18:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n\n  return function handleSCA(_x) {\n    return _ref2.apply(this, arguments);\n  };\n}();\n\nvar webdriver = function webdriver() {\n  return navigator.webdriver || !!document.documentElement.getAttribute(atob('d2ViZHJpdmVy')) || // @ts-ignore\n  !!window.callPhantom || // @ts-ignore\n  !!window._phantom;\n};\n\nvar Session = /*#__PURE__*/function () {\n  function Session() {\n    _classCallCheck(this, Session);\n\n    this.loadedAt = now();\n    this.webdriver = webdriver();\n  }\n\n  _createClass(Session, [{\n    key: \"teardown\",\n    value: function teardown() {}\n  }, {\n    key: \"data\",\n    value: function data() {\n      return {\n        loadedAt: this.loadedAt,\n        webdriver: this.webdriver\n      };\n    }\n  }]);\n\n  return Session;\n}();\n\nvar Client = /*#__PURE__*/function () {\n  function Client() {\n    var config = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    _classCallCheck(this, Client);\n\n    this.project = config.project;\n    this.stripePromise = config.stripePromise;\n    if (typeof window !== 'undefined') this.startBrowserSession();\n  }\n  /**\n   * Starts a browser session.\n   */\n\n\n  _createClass(Client, [{\n    key: \"startBrowserSession\",\n    value: function startBrowserSession() {\n      if (!this.session) {\n        this.session = new Session();\n      }\n    }\n    /**\n     * Teardown the client session.\n     */\n\n  }, {\n    key: \"teardown\",\n    value: function teardown() {\n      if (this.session) this.session.teardown();\n    }\n    /**\n     * Submit a form.\n     *\n     * @param formKey - The form key.\n     * @param data - An object or FormData instance containing submission data.\n     * @param args - An object of form submission data.\n     */\n\n  }, {\n    key: \"submitForm\",\n    value: function () {\n      var _submitForm = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(formKey, data) {\n        var opts,\n            endpoint,\n            fetchImpl,\n            url,\n            serializeBody,\n            headers,\n            request,\n            payload,\n            response,\n            responseData,\n            _args = arguments;\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                opts = _args.length > 2 && _args[2] !== undefined ? _args[2] : {};\n                endpoint = opts.endpoint || 'https://formspree.io';\n                fetchImpl = opts.fetchImpl || fetchPonyfill({\n                  Promise: PromisePolyfill\n                }).fetch;\n                url = this.project ? \"\".concat(endpoint, \"/p/\").concat(this.project, \"/f/\").concat(formKey) : \"\".concat(endpoint, \"/f/\").concat(formKey);\n\n                serializeBody = function serializeBody(data) {\n                  if (data instanceof FormData) return data;\n                  return JSON.stringify(data);\n                };\n\n                headers = {\n                  Accept: 'application/json',\n                  'Formspree-Client': clientHeader(opts.clientName)\n                };\n\n                if (this.session) {\n                  headers['Formspree-Session-Data'] = encode64(this.session.data());\n                }\n\n                if (!(data instanceof FormData)) {\n                  headers['Content-Type'] = 'application/json';\n                }\n\n                request = {\n                  method: 'POST',\n                  mode: 'cors',\n                  body: serializeBody(data),\n                  headers: headers\n                }; // first check if we need to add the stripe paymentMethod\n\n                if (!(this.stripePromise && opts.createPaymentMethod)) {\n                  _context.next = 29;\n                  break;\n                }\n\n                _context.next = 12;\n                return opts.createPaymentMethod();\n\n              case 12:\n                payload = _context.sent;\n\n                if (!payload.error) {\n                  _context.next = 15;\n                  break;\n                }\n\n                return _context.abrupt(\"return\", {\n                  response: null,\n                  body: {\n                    errors: [{\n                      code: 'STRIPE_CLIENT_ERROR',\n                      message: 'Error creating payment method',\n                      field: 'paymentMethod'\n                    }]\n                  }\n                });\n\n              case 15:\n                // Add the paymentMethod to the data\n                appendExtraData(data, 'paymentMethod', payload.paymentMethod.id); // Send a request to Formspree server to handle the payment method\n\n                _context.next = 18;\n                return fetchImpl(url, _objectSpread2(_objectSpread2({}, request), {}, {\n                  body: data\n                }));\n\n              case 18:\n                response = _context.sent;\n                _context.next = 21;\n                return response.json();\n\n              case 21:\n                responseData = _context.sent;\n\n                if (!(responseData && responseData.stripe && responseData.stripe.requiresAction && responseData.resubmitKey)) {\n                  _context.next = 26;\n                  break;\n                }\n\n                _context.next = 25;\n                return handleSCA({\n                  stripePromise: this.stripePromise,\n                  responseData: responseData,\n                  response: response,\n                  payload: payload,\n                  data: data,\n                  fetchImpl: fetchImpl,\n                  request: request,\n                  url: url\n                });\n\n              case 25:\n                return _context.abrupt(\"return\", _context.sent);\n\n              case 26:\n                return _context.abrupt(\"return\", {\n                  response: response,\n                  body: responseData\n                });\n\n              case 29:\n                return _context.abrupt(\"return\", fetchImpl(url, request).then(function (response) {\n                  return response.json().then(function (body) {\n                    return {\n                      body: body,\n                      response: response\n                    };\n                  });\n                }));\n\n              case 30:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function submitForm(_x, _x2) {\n        return _submitForm.apply(this, arguments);\n      }\n\n      return submitForm;\n    }()\n  }]);\n\n  return Client;\n}();\n/**\n * Constructs the client object.\n */\n\nvar createClient = function createClient(config) {\n  return new Client(config);\n};\n/**\n * Fetches the global default client.\n */\n\nvar getDefaultClient = function getDefaultClient() {\n  if (!defaultClientSingleton) {\n    defaultClientSingleton = createClient();\n  }\n\n  return defaultClientSingleton;\n};\n/**\n * The global default client. Note, this client may not get torn down.\n */\n\nvar defaultClientSingleton;\n\nexport { Client, createClient, getDefaultClient };\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}